<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
		<meta name="keywords" content="HTML,CSS,JavaScript">
		<meta name="author" content="Daniel Tomov">
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}"/>
    <title>View Attractions in Virginia Beach</title>
    <link rel="icon" type="image/jpg" href="{{ url_for('static', filename='favicon.ico') }}"/>
  </head>
  <body>
    <div id="index_container">
      <header>
        <div id ="logo">
          <!--<img src="/static/images/logo.png" alt="logo">-->
		  <p style="color:white; font-size:160%; position:relative; top:8px;" id="logoText">VIRGINIA IS FOR LO<span style="color:red;">&#10084;</span>ERS</p>
        </div>

        <nav>
          <ul id="navUl">
            <li class="navItem"><a href="">Places to Visit</a></li>
            <li class="navItem"><a href="">Things to do</a></li>
            <li class="navItem"><a href="">Events</a></li>
            <li class="navItem"><a href="">Places to Stay</a></li>
            <li class="navItem"><a href="">Deals</a></li>
          </ul>
        </nav>

      </header>
      <main>
        <!--
        <div id="formDiv">
          <form action="#" method="post">
            <ul>
              <li><p class="searchText">Filter your search by:</p><li>
              <li><p class="searchText">Type of Attraction</p><li>
              {% for fil in filters %}
                <li><div class="checkBox">
                <input type="checkbox" name="{{fil}}" {{ checkBoxes[filters.index(fil)] }}><p>{{fil}}</p>
                </div></li>
              {% endfor %}
              
              <li><p class="searchText">Provinces</p><li>
                {% for prov in provinceList %}
                <li><div class="checkBox">
                <input type="radio" name="provinceSelector" value="{{prov}}" {{ checkBoxes[provinceList.index(prov) + filters|length] }}><p>{{prov}}</p>
              </div></li>
            {% endfor %}
            
            <li><button id="applyButton" type="submit" name="button" value="search">Apply Filters</button></li>
          </ul>
        </form>
        <button id="reset" onclick="reset()">Reset Filters</button>
              <li><button id="applyButton" type="submit" name="button" value="search">Apply Filters</button></li>
            </ul>
          </form>
          <button id="reset" onclick="reset()">Reset Filters</button>
        </div>
        -->
        <div id="index_content">
          <div id="formDiv">
            <form action="#" method="post">
              <div id="filterByTags">
                <label class="searchText" for="tags">Filter by Tags</label>
                <select name="tags" class="selectDropDown">
                  <option value="none">Filtering by all tags</option>
                  {% for fil in filters %}
                  <option value="{{ fil }}">{{ fil }}</option>
                  {% endfor %}
                </select>
                <p id="generate" onclick="createNewSearchField()">Generate</p>
                <div id="addAdditionalSearch">
                </div>
              </div>
              <div class="filterByCities">
                <label class="searchText" for="cities">Filter by Cities</label>
                <select name="cities" class="selectDropDown">
                  <option value="none">Filtering by all cities</option>
                  {% for prov in provinceList %}
                  <option value="{{ prov }}">{{ prov }}</option>
                  {% endfor %}
                </select>
              </div><button id="applyButton" type="submit" name="button" value="search">Apply Filters</button>
            </form>
          <button id="reset" onclick="reset()">Reset Filters</button>
          </div>
        </div>

      </main>
    </div>
          <p id="copyright">All images used are Copyright &copy; of the attraction they feature. All rights reserved to the attraction.</p>
		  <p id="period">.</p>
          <!-- <p class="attractionName">Attractions on this page: {{ attraction|length }}</p> -->
    <!-- <iframe frameborder=0 style='width:100%;height:500px; display:none;' src='//www.zeemaps.com/pub?group=4334511'> </iframe> -->
  
    <script>
      function createNewSearchField(){
        //create <label> element
        //var label = document.createElement("label");
        //label.className = "searchText";
        //label.innerHTML = "Filter by Tags"
        //label.htmlFor = "cities";

        var additionalSearch = document.createElement("div");
        additionalSearch.className = 'additionalSearch';
        if (document.querySelectorAll('.additionalSearch').length < 4){
          //Add the logical opperators
          var select = document.createElement("select");
          var logicalOperators = ["And", "Or"];
          if (document.querySelectorAll('.additionalSearch').length == 0) select.name = "logicalOne";
          if (document.querySelectorAll('.additionalSearch').length == 1) select.name = "logicalTwo";
          if (document.querySelectorAll('.additionalSearch').length == 2) select.name = "logicalThree";
          if (document.querySelectorAll('.additionalSearch').length == 3) select.name = "logicalFour";
          if (document.querySelectorAll('.additionalSearch').length == 4) select.name = "additionalTagsFive";
          for (const operator of logicalOperators){
            var option = document.createElement("option");
            option.value = operator;
            option.text = operator;
            select.appendChild(option);
          }
          additionalSearch.appendChild(select);
          
          //make select element to put into HTML
          var select = document.createElement("select");
          if (document.querySelectorAll('.additionalSearch').length == 0) select.name = "additionalTagsOne";
          if (document.querySelectorAll('.additionalSearch').length == 1) select.name = "additionalTagsTwo";
          if (document.querySelectorAll('.additionalSearch').length == 2) select.name = "additionalTagsThree";
          if (document.querySelectorAll('.additionalSearch').length == 3) select.name = "additionalTagsFour";
          if (document.querySelectorAll('.additionalSearch').length == 4) select.name = "additionalTagsFive";

          
          //console.log(document.querySelectorAll('.additionalSearch').length)
          //add <option> to HTML with Flask
          {% for fil in filters %}
          var option = document.createElement("option");
          option.value = "{{ fil }}";
          option.text = "{{fil}}";
          select.appendChild(option);
          {% endfor %}
          additionalSearch.appendChild(select);
          //document.getElementByClassName('searchText').innerHTML=  '';

          
          additionalSearch.className = "additionalSearch"
          //create <select> element
          var select = document.createElement("select");
          
          document.getElementById("addAdditionalSearch").appendChild(additionalSearch);
        }
      }
  		function getWidth() {
  		  return Math.max(
  			document.body.scrollWidth,
  			document.documentElement.scrollWidth,
  			document.body.offsetWidth,
  			document.documentElement.offsetWidth,
  			document.documentElement.clientWidth
  		  );
      }	  
      function getHeight() {
  		  return Math.max(
  			document.body.scrollHeight,
  			document.documentElement.scrollHeight,
  			document.body.offsetHeight,
  			document.documentElement.offsetHeight,
  			document.documentElement.clientHeight
  		  );
  		}
  
      function reset(){
        const boxes = document.querySelectorAll('.additionalSearch');
        boxes.forEach(box => {
          box.remove();
        });

        const selects = document.querySelectorAll(".selectDropDown");
        selects.forEach(first => {
          first.options[0].selected = true;
        });
      }
  	  var copyright = document.getElementById("copyright")
  	  copyright.style.top = getHeight() + "px";
  	  var period = document.getElementById("period")
  	  period.style.top = getHeight() + "px";
      document.getElementById("index_container").style.height = getHeight() + "px";
  	  //copyright.style.left = ((getWidth() / 2) - (copyright.offsetWidth / 2)) + "px";
  	  /*
  	  console.log(getHeight())
  	  console.log(getWidth())
  	  console.log(((getWidth() / 2) - copyright.offsetWidth) + "px")
  	  console.log(copyright)
  	  */
      console.log("Number of attractions: {{ attraction|length }}")
    </script>
  </body>
</html>